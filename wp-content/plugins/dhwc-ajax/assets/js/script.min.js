!function(e){"object"==typeof exports?e(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}((function(e){e.extend({bez:function(t,a){if(e.isArray(t)&&(t="bez_"+(a=t).join("_").replace(/\./g,"p")),"function"!=typeof e.easing[t]){var i=function(e,t){var a=[null,null],i=[null,null],o=[null,null],r=function(r,n){return o[n]=3*e[n],i[n]=3*(t[n]-e[n])-o[n],a[n]=1-o[n]-i[n],r*(o[n]+r*(i[n]+r*a[n]))},n=function(e){return o[0]+e*(2*i[0]+3*a[0]*e)};return function(e){return r(function(e){for(var t,a=e,i=0;++i<14&&(t=r(a,0)-e,!(Math.abs(t)<.001));)a-=t/n(a);return a}(e),1)}};e.easing[t]=function(e,t,o,r,n){return r*i([a[0],a[1]],[a[2],a[3]])(t/n)+o}}return t}})})),function(e){e.fn.dhwc_variation_swatches_form=function(){return this.each((function(){var t=e(this),a=[];e(".dhwcvs-swatches",t).length?t.addClass("variations--swatches"):t.addClass("variations--dropdown"),t.on("woocommerce_update_variation_values",(function(){e(this).find(".variation-selector").each((function(){var t=e(this),a=t.find("select"),i=t.next(".dhwcvs-swatches");i.find(".dhswatch").addClass("disabled"),a.find("option.enabled").each((function(){var t=e(this);i.find('.dhswatch[data-value="'+t.attr("value")+'"]').removeClass("disabled").addClass("enabled")})),e(".selected",i).length||""===a.val()||i.find('.dhswatch[data-value="'+a.val()+'"]').addClass("enabled selected")}))})).on("click",".dhswatch",(function(t){t.preventDefault();var i=e(this),o=i.closest(".value").find("select"),r=o.data("attribute_name")||o.attr("name"),n=i.data("value");o.trigger("focusin"),o.find('option[value="'+n+'"]').length&&(r,-1===a.indexOf(r)&&a.push(r),i.hasClass("selected")?(o.val(""),i.removeClass("selected"),delete a[a.indexOf(r)]):(i.addClass("selected").siblings(".selected").removeClass("selected"),o.val(n)),o.change())})).on("click",".reset_variations",(function(){e(this).closest(".variations_form").find(".dhswatch.selected").removeClass("selected"),a=[]})).on("dhwcvs_no_matching_variations",(function(){window.alert(wc_add_to_cart_variation_params.i18n_no_matching_variations_text)}))}))},e(document).ready((function(){e(".variations_form").dhwc_variation_swatches_form()}))}(jQuery),function(e){"use strict";var t=/\?/,a=function(){this.body=e(document.body),this.window=e(window),this.isAjaxLoading=!1,this.isSearchResult=!1,this.isSingleAddingToCart=!1,this.loopWrapper=e(dhwc_ajax_params.elements.product_wrapper),this.selector={toolbarSearchForm:e(".toolbar__search-form"),toolbarFilterWidgets:e(".toolbar__filter-widgets"),toolbarFilterCategory:e(".toolbar__filter-category"),categoriesMenu:e(".toobar__categories")}};a.prototype={init:function(){var e=this;if(this.initSingleAjaxAddToCart(),e.loopWrapper.length){var t=navigator.userAgent;e.body.on("dhwc_ajax_after_replace_content dhwc_ajax_after_infiniteScroll",(function(a,i){-1!==t.indexOf("Safari")&&-1===t.indexOf("Chrome")&&-1===navigator.userAgent.indexOf("Android")&&e.loadImageSrcset(i)})),e.window.off("popstate.dhwc_ajax").on("popstate.dhwc_ajax",(function(t){t.originalEvent.state&&t.originalEvent.state.dhwc_ajax&&e.load(window.location.href,!1,!0)})),e.historySupport()&&window.history.replaceState({dhwc_ajax:!0},"",window.location.href),this.initCategoriesMenu(),this.initToolbarFilterButton(),this.iniToolbarSearchButton(),this.initOrderingForm(),this.initSearchForm(),this.initInfiniteScroll(),this.initFilterWidgets(),this.initPagination()}},loadImageSrcset:function(t){e("img[srcset]",t).each((function(e,t){t.outerHTML=t.outerHTML}))},initSingleAjaxAddToCart:function(t){if("yes"===dhwc_ajax_params.ajax_add_to_cart){var a=this,i=e(".woocommerce-notices-wrapper:first")||$thisbutton.closest(".product").parent();t=t||e(".single-product"),e(".product:not(.product-type-external) form.cart",t).on("submit",(function(t){t.stopPropagation(),t.preventDefault();var o=e(this);if(!a.isSingleAddingToCart){a.isSingleAddingToCart=!0;var r=e(".single_add_to_cart_button",o);return e.ajax({type:"POST",url:a.create_ajax_url("add_to_cart"),data:o.serialize(),cache:!1,headers:{"cache-control":"no-cache"},beforeSend:function(){e(".single_add_to_cart_button",o).addClass("js-loading")},error:function(t,i,r){a.isSingleAddingToCart=!1,e(".single_add_to_cart_button",o).removeClass("js-loading")},success:function(t,o,n){r.removeClass("js-loading"),a.isSingleAddingToCart=!1,e(".woocommerce-error, .woocommerce-message, .woocommerce-info").remove(),i.prepend(t.fragments.dhwc_ajax_add_to_cart_message);var s=t.fragments;s&&(e.each(s,(function(t){e(t).addClass("updating").fadeTo("400","0.6").block({message:null,overlayCSS:{opacity:.6}})})),e.each(s,(function(t,a){e(t).replaceWith(a),e(t).stop(!0).css("opacity","1").unblock()})),a.body.trigger("wc_fragments_loaded")),a.body.trigger("dhwc_ajax_single_ajax_added_to_cart",[t.fragments,t.cart_hash])},complete:function(){"yes"===dhwc_ajax_params.single_ajax_added_to_cart_scroll&&a.scrollTo(i)}}),!1}}))}},_showSearchForm:function(t,a){this.body.addClass("dhwc-ajax--open-search-form"),this.selector.toolbarSearchForm.stop(!0).slideDown({duration:t,easing:e.bez([.25,.46,.45,.94]),complete:function(){a&&a()}})},_hideSearchForm:function(t,a){e(".toolbar__search-button").removeClass("js-active"),this.body.removeClass("dhwc-ajax--open-search-form"),this.selector.toolbarSearchForm.stop(!0).slideUp({duration:t,easing:e.bez([.25,.46,.45,.94]),complete:function(){a&&a()}})},toggleSearchForm:function(t,a){var i=this,o=500;a&&(o=0),i.body.hasClass("dhwc-ajax--open-widget")&&(i._hideWidgetsFilter(),e(".toolbar__filter-button").removeClass("js-active").addClass("js-close")),i.body.hasClass("dhwc-ajax--open-categories")&&(i._hideCategoriesMenu(),e(".toolbar__filter-category").removeClass("js-active")),i.body.hasClass("dhwc-ajax--open-search-form")?i._hideSearchForm(o,t):i._showSearchForm(o,t)},_showCategoriesMenu:function(){this.body.addClass("dhwc-ajax--open-categories"),this.selector.categoriesMenu.stop(!0).slideDown({duration:500,easing:e.bez([.25,.46,.45,.94]),complete:function(){}})},_hideCategoriesMenu:function(){e(".toolbar__filter-category").removeClass("js-active"),this.body.removeClass("dhwc-ajax--open-categories"),this.selector.categoriesMenu.stop(!0).slideUp({duration:500,easing:e.bez([.25,.46,.45,.94]),complete:function(){}})},toggleCategoriesMenu:function(){var t=this;t.body.hasClass("dhwc-ajax--open-widget")&&(t._hideWidgetsFilter(),e(".toolbar__filter-button").removeClass("js-active").addClass("js-close")),t.body.hasClass("dhwc-ajax--open-search-form")&&(t._hideSearchForm(500),e(".toolbar__search-button").removeClass("js-active")),t.body.hasClass("dhwc-ajax--open-categories")?t._hideCategoriesMenu():t._showCategoriesMenu()},_showWidgetsFilter:function(){this.body.addClass("dhwc-ajax--open-widget");var t="display-above";e(".dhwc-ajax__toolbar").hasClass("is-above-absolute")&&(t="display-absolute"),this.selector.toolbarFilterWidgets.hasClass(t)&&this.selector.toolbarFilterWidgets.stop(!0).slideDown({duration:500,easing:e.bez([.25,.46,.45,.94])})},_hideWidgetsFilter:function(){e(".toolbar__filter-button").removeClass("js-active").addClass("js-close"),this.body.removeClass("dhwc-ajax--open-widget");var t="display-above";e(".dhwc-ajax__toolbar").hasClass("is-above-absolute")&&(t="display-absolute"),this.selector.toolbarFilterWidgets.hasClass(t)&&this.selector.toolbarFilterWidgets.stop(!0).slideUp({duration:500,easing:e.bez([.25,.46,.45,.94])})},toggleWidgetsFilter:function(){var t=this;e(dhwc_ajax_params.elements.product_wrapper).data("found_posts")&&(t.body.hasClass("dhwc-ajax--open-search-form")&&(t._hideSearchForm(500),e(".toolbar__search-button").removeClass("js-active")),t.body.hasClass("dhwc-ajax--open-categories")&&(t._hideCategoriesMenu(),e(".toolbar__filter-category").removeClass("js-active")),t.body.hasClass("dhwc-ajax--open-widget")?t._hideWidgetsFilter():t._showWidgetsFilter())},iniToolbarSearchButton:function(){var t=this;this.body.on("click",".toolbar__search-button",(function(a){a.stopPropagation(),a.preventDefault();var i=e(this),o=e(".search-form__input",t.selector.toolbarSearchForm);i.toggleClass("js-active");t.toggleSearchForm((function(){try{i.hasClass("js-active")&&o.focus()}catch(e){}}))}))},initSearchForm:function(){var a=this,i=e("form",a.selector.toolbarSearchForm),o=e(".search-form__input",a.selector.toolbarSearchForm),r=e(".search-form__clear",a.selector.toolbarSearchForm),n=function(){var t='<a title="'+dhwc_ajax_params.i18n.remove_search_filter+'" class="toolbar__search__result-count" href="#">'+e(dhwc_ajax_params.elements.product_wrapper).data("result_count")+"</a>";e(".toolbar__search__result-count").remove(),e(".toolbar-body").append(t)};this.body.on("click",".toolbar__search__result-count",(function(e){e.stopPropagation(),e.preventDefault(),r.trigger("click")})),i.on("submit",(function(e){e.stopPropagation(),e.preventDefault();var r=o.val();if(/\S/.test(r)&&r.length>dhwc_ajax_params.search_min_keyword-1){var s=i.attr("action"),l=s+=(t.test(s)?"&":"?")+i.serialize();a.isSearchResult=!0,a.load(l,!1,!0,n)}}));var s=function(){e(".toolbar__search__result-count").remove(),o.val("")};r.on("click",(function(t){t.stopPropagation(),t.preventDefault(),a.isSearchResult?(a.isSearchResult=!1,a.load(a.selector.toolbarSearchForm.data("current_url"),!0,!0,e.proxy((function(){a.toggleSearchForm(s,!0)}),a))):a.toggleSearchForm(s,!0)})),o.on("keyup",e.proxy((function(e){e.target.value.length>1?r.addClass("js-show"):r.removeClass("js-show")}),this))},initToolbarFilterButton:function(){var t=this;t.body.on("click",".toolbar__filter-button, .filter-button__close",(function(a){a.stopPropagation(),a.preventDefault();var i=e(this);i.hasClass("js-active")?i.removeClass("js-active").addClass("js-close"):i.removeClass("js-close").addClass("js-active"),t.toggleWidgetsFilter()}))},initInfiniteScroll:function(){var t=this;if("undefined"!=typeof InfiniteScroll&&e(dhwc_ajax_params.elements.pagination_wrapper).length){var a=e(".dhwc-ajax__pagination"),i=e(dhwc_ajax_params.elements.product_list),o=dhwc_ajax_params.elements.product_item,r={path:dhwc_ajax_params.elements.pagination_next,append:o,nav:dhwc_ajax_params.elements.pagination_wrapper,debug:!1,scrollThreshold:400,history:!1,hideNav:dhwc_ajax_params.elements.pagination_wrapper,outlayer:null,loadOnScroll:!0,button:".load-more__button"};this.body.hasClass("dhwc-ajax-pagination-loadmore")&&(r.loadOnScroll=!1,r.button=".pagination__button-loadmore"),i.infiniteScroll(r),i.on("request.infiniteScroll",(function(){a.addClass("js-loading")})),i.on("error.infiniteScroll, last.infiniteScroll, append.infiniteScroll",(function(){a.removeClass("js-loading")})),i.on("append.infiniteScroll",(function(e,a,i,o){t.body.trigger("dhwc_ajax_after_infiniteScroll",[o])}))}},initCategoriesMenu:function(){var t=this;e(".toobar__categories").length&&(t.body.on("click",".toolbar__filter-category",(function(a){a.stopPropagation(),a.preventDefault(),e(this).toggleClass("js-active"),t.toggleCategoriesMenu()})),t.body.on("click",".toolbar__category-active a",(function(a){a.stopPropagation(),a.preventDefault();var i=e(this).attr("href");t.load(i,!0,!0)})),t.body.on("click",".toobar__categories .category__item-link",(function(a){a.stopPropagation(),a.preventDefault();var i=e(this).attr("href");t._hideSearchForm(),t._hideWidgetsFilter(),e(".toolbar__search__result-count").remove(),t.load(i,!0,!0)})))},initWCWidgetPrice:function(){var t=this,a=e(".woocommerce.widget_price_filter");if(a.length){a.find("input#min_price, input#max_price").hide(),a.find(".price_slider, .price_label").show();var i=a.find(".price_slider_amount #min_price").data("min"),o=a.find(".price_slider_amount #max_price").data("max"),r=a.find(".price_slider_amount #min_price").val(),n=a.find(".price_slider_amount #max_price").val();a.find(".price_slider:not(.ui-slider)").slider({range:!0,animate:!0,min:i,max:o,values:[r,n],create:function(){a.find(".price_slider_amount #min_price").val(r),a.find(".price_slider_amount #max_price").val(n),t.body.trigger("price_slider_create",[r,n])},slide:function(e,i){a.find("input#min_price").val(i.values[0]),a.find("input#max_price").val(i.values[1]),t.body.trigger("price_slider_slide",[i.values[0],i.values[1]])},change:function(e,a){t.body.trigger("price_slider_change",[a.values[0],a.values[1]])}})}},initWidgetLayeredNavFilter:function(){var t=this,a=".toolbar__filter-widgets";"sidebar"===dhwc_ajax_params.filter_widget_display&&(a=dhwc_ajax_params.elements.sidebar_filter),t.body.on("click",a+" .dhwc_ajax_widget_layered_nav_filters a,.toolbar__filter-active .dhwc_ajax_widget_layered_nav_filters a",(function(a){a.stopPropagation(),a.preventDefault();var i=e(this).attr("href");t.load(i,!0,!0)}))},initWCWidgetPriceFilter:function(){var a=this,i=e(".woocommerce.widget_price_filter");i.length&&e("form",i).on("submit",(function(i){i.stopPropagation(),i.preventDefault();var o=e(this),r=o.attr("action"),n=r+=(t.test(r)?"&":"?")+o.serialize();a.load(n,!0,!0)}))},initOrderingForm:function(a){var i=this,o=e(".woocommerce-ordering");a=a||!1,o.on("submit",(function(a){a.stopPropagation(),a.preventDefault();var o=e(this),r=o.get(0).action,n=r+=(t.test(r)?"&":"?")+o.serialize();i.load(n,!0,!0)})),!0===a&&o.on("change","select.orderby",(function(){e(this).closest("form").submit()}))},initFilterWidgets:function(){var t=this;if(t.body.hasClass("dhwc-ajax-archive")){t.body.on("click",".filter-widgets__backdrop",(function(a){a.stopPropagation(),a.preventDefault(),t.body.removeClass("dhwc-ajax--open-widget"),e(".toolbar__filter-button").removeClass("js-active").addClass("js-close")})),t.initWidgetLayeredNavFilter(),t.initWCWidgetPriceFilter();var a=".toolbar__filter-widgets";"sidebar"===dhwc_ajax_params.filter_widget_display&&(a=dhwc_ajax_params.elements.sidebar_filter),t.body.on("click",a+" .widget_layered_nav a, "+a+" .wc-layered-nav-rating a, "+a+" .dhwcvs-widget-layered-nav a",(function(a){a.stopPropagation(),a.preventDefault();var i=e(this).attr("href");"#"!==i&&t.load(i,!0,!0)})),t.body.on("click",".dhwc_ajax__overlay",(function(a){a.stopPropagation(),a.preventDefault(),t.body.hasClass("dhwc-ajax--open-widget")&&(t._hideWidgetsFilter(),e(".toolbar__filter-button").removeClass("js-active").addClass("js-close"))})),t.body.on("click",".widgettitle",(function(a){t.getViewport().width<768&&(a.stopPropagation(),a.preventDefault(),e(this).find(".dhwc-ajax-toggle-indicator").trigger("click"))})),t.body.on("click",".dhwc-ajax-toggle-indicator",(function(t){t.stopPropagation(),t.preventDefault();var a=e(this).closest(".widget"),i=a.find(".widgetcontent");i.is(":visible")?(a.removeClass("js-open").addClass("js-close"),i.stop(!0).slideUp({duration:500,easing:e.bez([.25,.46,.45,.94])})):(a.removeClass("js-close").addClass("js-open"),i.stop(!0).slideDown({duration:500,easing:e.bez([.25,.46,.45,.94]),complete:function(){a.removeClass("is-closed")}}))}))}},initPagination:function(){var t=this,a=function(){var a=t.loopWrapper;a.length&&e("html, body").animate({scrollTop:a.offset().top-100},1e3)};t.body.on("click",".is-ajax-pagination "+dhwc_ajax_params.elements.pagination_wrapper+" a",(function(i){i.preventDefault(),i.stopPropagation();var o=e(this).attr("href");t.load(o,!0,!0,!1,a)}))},historySupport:function(){return!(!window.history||!history.pushState)},isSmoothScrollSupported:function(){return"scrollBehavior"in document.documentElement.style},setPushState:function(e){this.historySupport()&&window.history.pushState({dhwc_ajax:!0},"",e)},scrollTo:function(t){(t=e(t)).length&&e("html, body").animate({scrollTop:t.offset().top-100},1e3)},create_ajax_url:function(e){return dhwc_ajax_params.ajax_url.toString().replace("__action__",e)},toggleLoading:function(){var t=e(dhwc_ajax_params.elements.product_wrapper);this.isAjaxLoading?t.addClass("dhwc-ajax-loading"):t.removeClass("dhwc-ajax-loading")},replaceContent:function(t){var a=this;a.body.trigger("dhwc_ajax_before_replace_content",[t]),document.title=t.find("title").text(),e(".filter-widgets").replaceWith(t.find(".filter-widgets")),e(dhwc_ajax_params.elements.sidebar_filter).replaceWith(t.find(dhwc_ajax_params.elements.sidebar_filter)),e(".toolbar-wc").replaceWith(t.find(".toolbar-wc")),a.initOrderingForm(!0),e(dhwc_ajax_params.elements.page_title).replaceWith(t.find(dhwc_ajax_params.elements.page_title)),e(dhwc_ajax_params.elements.page_breadcrumb).replaceWith(t.find(dhwc_ajax_params.elements.page_breadcrumb)),e(".categories__list").replaceWith(t.find(".categories__list")),e(".toolbar__category-active").replaceWith(t.find(".toolbar__category-active")),e(".woocommerce-products-header").replaceWith(t.find(".woocommerce-products-header")),e(".heading__title").replaceWith(t.find(".heading__title")),a.initWCWidgetPrice(),a.initWCWidgetPriceFilter(),setTimeout((function(){a.initWCWidgetPrice(),a.initWCWidgetPriceFilter(),"function"==typeof e.fn.dhwc_ajax_slider_filter&&e(".dhwc-ajax__slider-filter").dhwc_ajax_slider_filter()}),500),e(".toolbar__filter-active").replaceWith(t.find(".toolbar__filter-active")),e(dhwc_ajax_params.elements.product_wrapper).replaceWith(t.find(dhwc_ajax_params.elements.product_wrapper));var i=".dhwc-ajax__pagination";t.find(i).length?(e(i).show(),e(i).replaceWith(t.find(i).first())):e(i).empty().hide(),a.initInfiniteScroll(),a.body.trigger("dhwc_ajax_after_replace_content",[t])},load:function(t,a,i,o,r){var n=this;void 0===t||n.isAjaxLoading||(t=t&&t.replace(/\/?(\?|#|$)/,"/$1"),a&&n.setPushState(t),n.isAjaxLoading=!0,e.ajax({url:t,headers:{dhwcajax:"yes"},dataType:"html",method:"GET",beforeSend:function(){n.toggleLoading(),e(".toolbar__filter-category").hasClass("js-active")&&e(".toolbar__filter-category").trigger("click"),n.body.trigger("dhwc_ajax_before_load"),r&&r()},error:function(e,t,a){n.isAjaxLoading=!1,n.toggleLoading()},success:function(t){t=e("<div>"+t+"</div>"),n.replaceContent(t),n.isAjaxLoading=!1,n.toggleLoading(),o&&o(),n.body.trigger("dhwc_ajax_after_load")}}))},getViewport:function(){var e=window,t="inner";return"innerWidth"in window||(t="client",e=document.documentElement||document.body),{width:e[t+"Width"],height:e[t+"Height"]}}},e.dhwc_ajax=new a,e(document).ready((function(){e.dhwc_ajax.init()}))}(jQuery);